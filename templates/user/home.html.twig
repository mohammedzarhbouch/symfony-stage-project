{% extends 'base.html.twig' %}


{% block title %} 'Welcome Home' {% endblock %}



{% block body %}


{#    {% if app.user %}#}
{#        <div class="mb-3">#}
{#            You are logged in as {{ app.user.email }}, <a href="{{ path('app_logout') }}">Logout</a>#}
{#        </div>#}
{#    {% endif %}#}
    <div class="page-title-home">
        <h1>USER POSTS</h1>

        {% if alreadyFollowing == 1  %}
            <a id="following-text">Already following</a>
        {% endif %}
    </div>


    <div class="container">
        <div class="button-container">
            <a href="{{ path('create-post') }}" class="home-main-buttons">Create Post</a>
            <a href="{{ path('show-posts') }}" class="home-main-buttons">Show my posts</a>
            <a href="{{ path('show-comments') }}" class="home-main-buttons">Show my Comments</a>
            <a href="{{ path('follow-list') }}" class="home-main-buttons">Follow List</a>
{#            <a href="{{ path('saved-ratings') }}" class="home-main-buttons">test</a>#}


        </div>

        <div class="home-main">
            {% for post in posts %}
                <div class="post">
                    <a class="inspect-link" href="{{ path('inspect-post', { 'id': post.id }) }}">
                        <div class="title-data">{{ post.title }}</div>
                    </a>
                    <div class="text-data">{{ post.id }}</div>
{#                        <div>{{ post.userRating }}</div>#}


                    {% set userRating = 0 %}

                    {% for rating in userRatings %}
                        {% if rating.post.id == post.id %}

                            {% set userRating = rating.score %}

                        {% endif %}
                    {% endfor %}




                <a class="rating-text">Rate this post!</a>
                    <div class="ratings" data-user-rating="{{ userRating }}">
                        <div class="rating-button-container">
                            <a class="rating-button" data-value="1" data-id="{{ post.id }}">
                                <i class="{{ userRating}} fa-star"></i>
                            </a>
                            <a class="rating-button" data-value="2" data-id="{{ post.id }}">
                                <i class="{{ userRating}} fa-star"></i>
                            </a>
                            <a class="rating-button" data-value="3" data-id="{{ post.id }}">
                                <i class="{{ userRating}} fa-star"></i>
                            </a>
                            <a class="rating-button" data-value="4" data-id="{{ post.id }}">
                                <i class="{{ userRating}} fa-star"></i>
                            </a>
                            <a class="rating-button" data-value="5" data-id="{{ post.id }}">
                                <i class="{{ userRating }} fa-star"></i>
                            </a>
                        </div>






                    </div>





                    <div class="home-post-footer">

                        <a class="home-post-date">{{ post.date|date('d-m-Y') }}</a>
                        <div class="popup" >
                            <a>Posts: {{ post.user.postCount }}</a>
                            <a>Comments: {{ post.user.commentCount }}</a>
                        </div>
                        <div class="homePostedBy" >{{ post.user.username }}</div>
                    </div>
                </div>



            {% else %}
                <p>No posts available.</p>
            {% endfor %}
        </div>
    </div>


{% endblock %}